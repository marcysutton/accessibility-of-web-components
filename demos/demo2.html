<!DOCTYPE html>
<html>
<head>
	<title>Shadow DOM Accessibility: Demo 2</title>
	<link href="style.css" rel="stylesheet">
	<link href="slider.css" rel="stylesheet">
</head>
<body id="demo2">
	<header>
		<h1>Are you sure?</h1>
	</header>
	<main>
		<template>
			<div class="component-wrapper">
				<div class="well">
					<h2>
						<span>slide to unlock</span>
						<button id="slider" role="slider" aria-disabled="false" aria-hidden="false" aria-min="0" aria-max="100">Drag</button> 
					</h2>
				</div>
				<button class="trigger-button" id="play-button" disabled aria-disabled="true" aria-hidden="true">PLAY</button>
			</div>
	  </template>
		<slider-control id="slider-control"></slider-control>
	</main>
  <script src="platform/platform.js"></script>
	<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js'></script>
	<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js'></script>
  <script src="slider.js"></script>
	<script>
		var image = new Image();
		image.setAttribute('src','goats-on-metal.gif');
		image.setAttribute('alt','goats on metal gif');

    var template = document.querySelector('template');
    var elComponent = Object.create(HTMLElement.prototype);
    elComponent.createdCallback = function() {
      var root = this.createShadowRoot();
      var clone = template.content.cloneNode(true);
      
      new Slider(clone);

      var button = clone.querySelector('#play-button');
      button.addEventListener('click', function(event){
      	button.className += 'hidden';
      	button.setAttribute('aria-hidden', 'true');
      	button.setAttribute('aria-disabled','true');
      	document.querySelector('main').appendChild(image);
      });

			root.appendChild(clone);
    };
    document.registerElement("slider-control", {
      prototype: elComponent
    });
	</script>
</body>
</html>
